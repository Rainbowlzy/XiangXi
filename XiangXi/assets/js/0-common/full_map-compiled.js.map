{"version":3,"sources":["full_map.js"],"names":[],"mappings":"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","file":"full_map-compiled.js","sourcesContent":["'use strict';\n\nrequire(['vue', 'jquery', 'cmodules', 'amap'], function (Vue, $) {\n    Vue.filter('json', function (val) {\n        return JSON.stringify(val);\n    });\n    $(document).ready(function urlborder() {\n        $('#m6').on(\"click\", function () {\n            alert(\"该模块还在开发中！\");\n        });\n        $.login();\n        var request = GetRequest() || { data: JSON.stringify({ address: '摄像头' }) };\n        if (!request || !request.data) {\n            alert('error');\n            return;\n        }\n        var data = JSON.parse(decodeURIComponent(request.data));\n        var address = data.address;\n        AMap.Marker.prototype.openWindow = function (content) {\n            var map = this.getMap();\n            var position = this.getPosition();\n            position = [position.lng, position.lat];\n            var w = new AMap.InfoWindow({\n                //                                        content: '<iframe src=\"' + (link || '../2_map/CGcard.html') + '\" width=\"400\" height=\"250\" frameborder=\"no\" border=\"0\"   marginheight=\"0\" scrolling=\"no\" allowtransparency=\"yes\"/>'\n                content: content || '<iframe frameborder=\"0\" src=\"../2_map/inner_population.html?address=' + this.getTitle() + '\" width=\"400\" height=\"500\"></iframe>',\n                showShadow: true\n            });\n            w.open(map, position);\n            map.panTo(position);\n        };\n        var row2point = function row2point(e) {\n            return [parseFloat(e.Longitude), parseFloat(e.Latitude)];\n        };\n        $.call('getpoilist', { search: data.address, limit: 4000, order: 'ord' }, function (resp) {\n            data.markers = [];\n            data.polygons = [];\n            data.resp = resp;\n            var vm = new Vue({\n                mounted: function mounted() {\n                    this.bind();\n                    var center = data.lnglat || [120.511928, 31.252379];\n                    $.print('load current position ' + JSON.stringify(center));\n                    var zoom = data.zoom || 20;\n                    $.print('load current zoom ' + JSON.stringify(zoom));\n                    this.map = new AMap.Map('amap', {\n                        zoom: zoom,\n                        layers: [new AMap.TileLayer.Satellite()],\n                        center: center\n                    });\n                    var thiz = this;\n                    var ord = 0;\n                    this.state = 'review';\n                    var clickListener = AMap.event.addListener(thiz.map, \"click\", function (e) {\n                        $.print('click point ' + JSON.stringify(e.lnglat) + ' ' + thiz.state);\n                        if (thiz.markers && thiz.state === 'editmarker') {\n                            if (ord === 0) ord = thiz.markers.length;\n                            thiz.markers.push({\n                                \"PAddress\": thiz.address,\n                                \"Latitude\": e.lnglat.lat,\n                                \"Longitude\": e.lnglat.lng,\n                                \"ord\": ++ord\n                            });\n                        }\n                        if (thiz.polygons && thiz.state === 'editpolygon') {\n                            var polygons = thiz.polygons.filter(function (e) {\n                                return e.name === thiz.address;\n                            });\n                            var polygon = polygons[0];\n                            if (polygons.length === 0) {\n                                thiz.polygons.push(polygon = {\n                                    name: thiz.address,\n                                    points: []\n                                });\n                            }\n                            if (ord === 0) ord = polygon.points.length;\n                            polygon.points.push({\n                                \"PAddress\": thiz.address,\n                                \"Latitude\": e.lnglat.lat,\n                                \"Longitude\": e.lnglat.lng,\n                                \"ord\": ++ord\n                            });\n                            polygon.center = $.calcCenter(polygon.points.map(function (e) {\n                                return [parseFloat(e.Longitude), parseFloat(e.Latitude)];\n                            }));\n                            var marker = new AMap.Marker({\n                                map: thiz.map,\n                                position: [e.lnglat.lng, e.lnglat.lat],\n                                title: name + ord\n                            });\n                        }\n                    });\n                    this.paintMarkers();\n                },\n                data: data,\n                watch: {\n                    markers: {\n                        handler: function handler(val, oldval) {\n                            return this.paintMarkers();\n                        },\n                        deep: true\n                    },\n                    polygons: {\n                        handler: function handler(val, oldval) {\n                            return this.paintMarkers();\n                        },\n                        deep: true\n                    }\n                },\n                methods: {\n                    search: function search() {\n                        var c = this;\n                        var address = this.address;\n                        $.call('getpoilist', { search: address }, function (resp) {\n                            c.resp = resp;\n\n                            console.log(resp);\n                            $.mapSearch(address, function (result) {\n                                // 搜索成功时，result即是对应的匹配数据\n                                if (result.tips) {\n                                    var ord = 0;\n                                    c.$data.markers = result.tips.filter(function (ent) {\n                                        return ent.location;\n                                    }).map(function (ent) {\n                                        return {\n                                            \"PAddress\": ent.name,\n                                            \"Latitude\": ent.location.lat,\n                                            \"Longitude\": ent.location.lng,\n                                            \"ord\": ++ord\n                                        };\n                                    });\n                                }\n                            });\n                            c.bind();\n                        });\n                    },\n                    bind: function bind() {\n                        var data = this.$data;\n                        data.polygons = [];\n                        data.markers = [];\n                        $.each(this.resp.rows.groupby('PAddress'), function (k, v) {\n                            var points = this;\n                            if (points.length > 1) {\n                                // 多边形\n                                data.polygons.push({\n                                    name: k,\n                                    points: points\n                                });\n                            } else {\n                                // 单点\n                                data.markers.push(points[0]);\n                            }\n                        });\n                    },\n                    polygon2save: function polygon2save() {\n                        var results = [];\n                        $.each(this.polygons, function () {\n                            var name = this.name;\n                            $.each(this.points, function () {\n                                this.PAddress = name;\n                                this.id = null;\n                                results.push(this);\n                            });\n                        });\n                        return results;\n                    },\n                    delete: function _delete(markers, i) {},\n                    editpoint: function editpoint() {\n                        debugger;\n                        $(\"#address\").attr(\"readonly\", false);\n                        if (this.address.indexOf('#') === -1) this.address += '#';\n                        this.state = this.state === 'editmarker' ? 'review' : 'editmarker';\n                    },\n                    editpolygon: function editpolygon() {\n                        $(\"#address\").attr(\"readonly\", false);\n                        if (this.address.indexOf('#') === -1) this.address += '#';\n                        this.state = this.state === 'editpolygon' ? 'review' : 'editpolygon';\n                    },\n                    save: function save() {\n                        debugger;\n                        var thiz = this;\n                        $.call('savepoilist', this.markers.concat(this.polygon2save()).concat([{\n                            PAddress: this.address\n                        }]).map(function (data) {\n                            return $.select(data, ['id', 'Latitude', 'Longitude', 'PAddress', 'ord']);\n                        }, function (result) {\n                            alert(result.message);\n                            location.reload();\n                        }));\n                    },\n                    refresh: function refresh() {\n                        var vm = this;\n                        location.reload();\n                    },\n                    paintMarkers: function paintMarkers() {\n                        var thiz = this;\n                        this.map.clearMap();\n                        $.each(this.markers, function () {\n                            var ent = {\n                                \"PAddress\": ent.name,\n                                \"Latitude\": ent.position.lat,\n                                \"Longitude\": ent.position.lng,\n                                \"ord\": ++ord\n                            };\n                            var c = this;\n                            var lnglat = [this.Longitude, this.Latitude];\n                            var marker = new AMap.Marker({\n                                map: thiz.map,\n                                position: lnglat,\n                                title: this.PAddress,\n                                draggable: true,\n                                content: '<div class=\"marker-route marker-marker-bus-from\"></div>' //自定义点标记覆盖物内容\n                            });\n                            marker.setMap(thiz.map);\n                            marker.on('click', function (e) {\n                                this.openWindow('<iframe frameborder=\"0\" src=\"../2_map/inner_population.html?address=' + this.getTitle() + '\" width=\"500\" height=\"500\"></iframe>');\n                            });\n                            thiz.map.panTo(lnglat);\n                            this.marker = marker;\n                        });\n\n                        var name = this.address;\n                        var polygons = this.polygons;\n                        $.each(polygons, function () {\n                            var cur = this;\n                            var points2 = cur.points.map(function (e) {\n                                return [parseFloat(e.Longitude), parseFloat(e.Latitude)];\n                            });\n                            if (points2.length === 0) return;\n                            var center = $.calcCenter(points2);\n                            var marker = new AMap.Marker({\n                                map: thiz.map,\n                                position: center,\n                                title: this.name\n                            });\n                            var polygon = new AMap.Polygon({\n                                map: thiz.map,\n                                fillColor: 'blue',\n                                fillOpacity: 0.3,\n                                path: points2\n                            });\n                            var k = 0;\n                            marker.on('click', function (e) {\n                                this.openWindow('<iframe frameborder=\"0\" src=\"../2_map/inner_population.html?address=' + this.getTitle() + '\" width=\"500\" height=\"500\"></iframe>');\n                            });\n                            thiz.map.setFitView();\n                            thiz.map.panTo(center);\n                        });\n                    },\n                    panTo: function panTo(marker, index) {\n                        this.address = marker.PAddress;\n                        if (marker.marker) marker.marker.openWindow('<iframe frameborder=\"0\" src=\"../2_map/inner_population.html?address=' + marker.marker.getTitle() + '\" width=\"500\" height=\"500\"></iframe>');\n                        if (marker.center) this.map.panTo(marker.center);\n                    },\n                    editorswitch: function editorswitch() {\n                        this.state.switch = !this.state.switch;\n                    }\n                }\n            }).$mount('#app');\n        });\n    });\n});\n\n//# sourceMappingURL=full_map-compiled.js.map"]}
